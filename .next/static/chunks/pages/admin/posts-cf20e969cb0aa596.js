(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[633],{2062:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/posts",function(){return r(4233)}])},4233:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var s=r(7876),d=r(1898),o=r(9099),i=r(4232),a=r(4234),n=r(2009);function l(){let{currentUser:e,logout:t}=(0,d.As)(),r=(0,o.useRouter)(),[l,c]=(0,i.useState)([]),[p,f]=(0,i.useState)(!0);(0,i.useEffect)(()=>{(async()=>{f(!0),c((await (0,n.GG)((0,n.rJ)(a.db,"posts"))).docs.map(e=>({id:e.id,...e.data()}))),f(!1)})()},[]);let u=async e=>{try{await (0,n.mZ)((0,n.H9)(a.db,"posts",e.id),{status:"approved"}),c(t=>t.map(t=>t.id===e.id?{...t,status:"approved"}:t))}catch(e){alert("Failed to approve post")}},h=async e=>{try{await (0,n.mZ)((0,n.H9)(a.db,"posts",e.id),{status:"rejected"}),c(t=>t.map(t=>t.id===e.id?{...t,status:"rejected"}:t))}catch(e){alert("Failed to reject post")}};return(0,s.jsx)("div",{style:{padding:"2rem",minHeight:"100vh",background:"#f3f4f6"},children:(0,s.jsxs)("div",{style:{maxWidth:1100,margin:"2rem auto",background:"#fff",borderRadius:12,boxShadow:"0 2px 12px rgba(0,0,0,0.10)",padding:"2rem",color:"#222"},children:[(0,s.jsx)("h1",{style:{marginBottom:"1.5rem",color:"#222"},children:"Manage All Posts"}),p?(0,s.jsx)("p",{children:"Loading posts..."}):0===l.length?(0,s.jsx)("p",{children:"No posts found."}):(0,s.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"1.5rem",marginTop:"1rem"},children:l.map(e=>(0,s.jsxs)("div",{style:{flex:"1 1 320px",minWidth:320,maxWidth:380,background:"#f9fafb",borderRadius:10,boxShadow:"0 2px 8px rgba(0,0,0,0.08)",padding:"1.5rem",border:"1px solid #e5e7eb",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{style:{fontWeight:700,color:"#4f46e5",fontSize:"1.1rem",marginBottom:6},children:["$",e.price]}),(0,s.jsx)("h2",{style:{fontSize:"1.2rem",fontWeight:600,color:"#222",marginBottom:8},children:e.title}),(0,s.jsx)("p",{style:{color:"#444",marginBottom:12},children:e.description})]}),(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",marginTop:10,justifyContent:"space-between"},children:[(0,s.jsx)("span",{style:{padding:"0.3rem 0.9rem",borderRadius:20,fontWeight:600,fontSize:"0.95rem",background:"approved"===e.status?"#e0fbe3":"rejected"===e.status?"#fee2e2":"#fef9c3",color:"approved"===e.status?"#16a34a":"rejected"===e.status?"#dc2626":"#b45309",border:"1px solid",borderColor:"approved"===e.status?"#bbf7d0":"rejected"===e.status?"#fecaca":"#fde68a"},children:e.status}),"pending"===e.status&&(0,s.jsxs)("div",{style:{display:"flex",gap:"0.5rem"},children:[(0,s.jsx)("button",{onClick:()=>u(e),style:{background:"#4f46e5",color:"#fff",border:"none",borderRadius:6,padding:"0.5rem 1rem",cursor:"pointer",fontWeight:500},children:"Approve"}),(0,s.jsx)("button",{onClick:()=>h(e),style:{background:"#dc2626",color:"#fff",border:"none",borderRadius:6,padding:"0.5rem 1rem",cursor:"pointer",fontWeight:500},children:"Reject"})]}),(0,s.jsx)("button",{style:{background:"#4f46e5",color:"#fff",border:"none",borderRadius:"50%",width:36,height:36,fontSize:18,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",marginLeft:8},title:"View Chats",onClick:()=>r.push("/admin/chats"),children:"\uD83D\uDCAC"})]})]},e.id))})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(2062)),_N_E=e.O()}]);