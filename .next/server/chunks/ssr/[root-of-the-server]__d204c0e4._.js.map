{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 53, "column": 0}, "map": {"version":3,"sources":["file:///Users/fras/Desktop/FleetFras/lib/firebase.js"],"sourcesContent":["import { initializeApp } from \"firebase/app\";\nimport { \n  getAuth, \n  GoogleAuthProvider, \n  signInWithPopup \n} from \"firebase/auth\";\nimport { getFirestore, doc, getDoc, setDoc } from \"firebase/firestore\";\n\nconst firebaseConfig = {\n  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\n  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\n  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\n  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID\n};\n\nconst app = initializeApp(firebaseConfig);\nconst auth = getAuth(app);\nconst db = getFirestore(app);\nconst googleProvider = new GoogleAuthProvider();\n\nconst signInWithGoogle = async () => {\n  try {\n    const result = await signInWithPopup(auth, googleProvider);\n    // This gives you a Google Access Token. You can use it to access the Google API.\n    const credential = GoogleAuthProvider.credentialFromResult(result);\n    const token = credential.accessToken;\n    // The signed-in user info.\n    const user = result.user;\n    \n    // Check if user exists in Firestore\n    const userDoc = await getDoc(doc(db, 'users', user.uid));\n    if (!userDoc.exists()) {\n      // Add user to Firestore if they don't exist\n      await setDoc(doc(db, 'users', user.uid), {\n        email: user.email,\n        name: user.displayName,\n        role: 'purchaser', // Default role\n        createdAt: new Date().toISOString(),\n      });\n    }\n    \n    return user;\n  } catch (error) {\n    console.error(\"Error signing in with Google:\", error);\n    throw error;\n  }\n};\n\nexport { auth, db, signInWithGoogle, googleProvider };\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AAKA;;;;;;;;;;AAEA,MAAM,iBAAiB;IACrB,MAAM;IACN,UAAU;IACV,SAAS;IACT,aAAa;IACb,iBAAiB;IACjB,KAAK;AACP;AAEA,MAAM,MAAM,CAAA,GAAA,8HAAA,CAAA,gBAAa,AAAD,EAAE;AAC1B,MAAM,OAAO,CAAA,GAAA,gIAAA,CAAA,UAAO,AAAD,EAAE;AACrB,MAAM,KAAK,CAAA,GAAA,0IAAA,CAAA,eAAY,AAAD,EAAE;AACxB,MAAM,iBAAiB,IAAI,gIAAA,CAAA,qBAAkB;AAE7C,MAAM,mBAAmB;IACvB,IAAI;QACF,MAAM,SAAS,MAAM,CAAA,GAAA,gIAAA,CAAA,kBAAe,AAAD,EAAE,MAAM;QAC3C,iFAAiF;QACjF,MAAM,aAAa,gIAAA,CAAA,qBAAkB,CAAC,oBAAoB,CAAC;QAC3D,MAAM,QAAQ,WAAW,WAAW;QACpC,2BAA2B;QAC3B,MAAM,OAAO,OAAO,IAAI;QAExB,oCAAoC;QACpC,MAAM,UAAU,MAAM,CAAA,GAAA,0IAAA,CAAA,SAAM,AAAD,EAAE,CAAA,GAAA,0IAAA,CAAA,MAAG,AAAD,EAAE,IAAI,SAAS,KAAK,GAAG;QACtD,IAAI,CAAC,QAAQ,MAAM,IAAI;YACrB,4CAA4C;YAC5C,MAAM,CAAA,GAAA,0IAAA,CAAA,SAAM,AAAD,EAAE,CAAA,GAAA,0IAAA,CAAA,MAAG,AAAD,EAAE,IAAI,SAAS,KAAK,GAAG,GAAG;gBACvC,OAAO,KAAK,KAAK;gBACjB,MAAM,KAAK,WAAW;gBACtB,MAAM;gBACN,WAAW,IAAI,OAAO,WAAW;YACnC;QACF;QAEA,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,iCAAiC;QAC/C,MAAM;IACR;AACF","debugId":null}},
    {"offset": {"line": 116, "column": 0}, "map": {"version":3,"sources":["file:///Users/fras/Desktop/FleetFras/context/AuthContext.js"],"sourcesContent":["import { createContext, useContext, useEffect, useState } from 'react';\nimport { auth } from '../lib/firebase';\nimport { onAuthStateChanged, signOut } from 'firebase/auth';\n\nexport const AuthContext = createContext({});\n\nexport function useAuth() {\n  return useContext(AuthContext);\n}\n\nexport function AuthProvider({ children }) {\n  const [currentUser, setCurrentUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, (user) => {\n      setCurrentUser(user);\n      setLoading(false);\n      console.log('[AuthContext] onAuthStateChanged user:', user);\n    });\n    return unsubscribe;\n  }, []);\n\n  useEffect(() => {\n\n  }, [currentUser, loading]);\n\n  const logout = async () => {\n    // Call API to clear session cookie\n    console.log('[AuthContext] Logging out...');\n    await fetch('/api/sessionLogout', { method: 'POST' });\n    await signOut(auth);\n    console.log('[AuthContext] Signed out from Firebase Auth');\n  };\n\n  const value = {\n    currentUser,\n    loading,\n    logout,\n  };\n\n  return (\n    <AuthContext.Provider value={value}>\n      {children}\n    </AuthContext.Provider>\n  );\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;;;;;;;;;;AAEO,MAAM,4BAAc,CAAA,GAAA,mGAAA,CAAA,gBAAa,AAAD,EAAE,CAAC;AAEnC,SAAS;IACd,OAAO,CAAA,GAAA,mGAAA,CAAA,aAAU,AAAD,EAAE;AACpB;AAEO,SAAS,aAAa,EAAE,QAAQ,EAAE;IACvC,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,mGAAA,CAAA,WAAQ,AAAD,EAAE;IAC/C,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,mGAAA,CAAA,WAAQ,AAAD,EAAE;IAEvC,CAAA,GAAA,mGAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,cAAc,CAAA,GAAA,gIAAA,CAAA,qBAAkB,AAAD,EAAE,wGAAA,CAAA,OAAI,EAAE,CAAC;YAC5C,eAAe;YACf,WAAW;YACX,QAAQ,GAAG,CAAC,0CAA0C;QACxD;QACA,OAAO;IACT,GAAG,EAAE;IAEL,CAAA,GAAA,mGAAA,CAAA,YAAS,AAAD,EAAE,KAEV,GAAG;QAAC;QAAa;KAAQ;IAEzB,MAAM,SAAS;QACb,mCAAmC;QACnC,QAAQ,GAAG,CAAC;QACZ,MAAM,MAAM,sBAAsB;YAAE,QAAQ;QAAO;QACnD,MAAM,CAAA,GAAA,gIAAA,CAAA,UAAO,AAAD,EAAE,wGAAA,CAAA,OAAI;QAClB,QAAQ,GAAG,CAAC;IACd;IAEA,MAAM,QAAQ;QACZ;QACA;QACA;IACF;IAEA,qBACE,qKAAC,YAAY,QAAQ;QAAC,OAAO;kBAC1B;;;;;;AAGP","debugId":null}},
    {"offset": {"line": 231, "column": 0}, "map": {"version":3,"sources":["file:///Users/fras/Desktop/FleetFras/src/pages/_app.js"],"sourcesContent":["import \"@/styles/globals.css\";\nimport { AuthProvider, useAuth } from \"../../context/AuthContext\";\nimport { useRouter } from 'next/router';\nimport { useEffect, useState } from 'react';\nimport '../../styles/auth.css';\n\nfunction Navbar() {\n  const { currentUser, logout } = useAuth();\n  const router = useRouter();\n  const [mounted, setMounted] = useState(false);\n  useEffect(() => { setMounted(true); }, []);\n  console.log('[Navbar] currentUser:', currentUser);\n  const hideNavbar = ['/login', '/signup'].includes(router.pathname);\n  if (!mounted || hideNavbar) return null;\n  const handleLogout = async () => {\n    await logout();\n    router.push('/login');\n  };\n  return (\n    <nav style={{\n      width: '100%',\n      background: '#fff',\n      borderBottom: '1px solid #e5e7eb',\n      padding: '0.75rem 2rem',\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'space-between',\n      position: 'sticky',\n      top: 0,\n      zIndex: 2000\n    }}>\n      <div style={{ fontWeight: 700, color: '#4f46e5', fontSize: 20, cursor: 'pointer' }} onClick={() => router.push('/')}>FleetFras</div>\n      {currentUser && (\n        <div style={{ display: 'flex', alignItems: 'center', gap: '1rem' }}>\n          <div style={{ color: '#222', fontWeight: 500, fontSize: 15, background: '#f3f4f6', borderRadius: 6, padding: '0.3rem 0.8rem', border: '1px solid #e5e7eb' }}>\n            {currentUser.displayName || 'No Name'}<br/>\n            <span style={{ color: '#4f46e5', fontWeight: 400, fontSize: 13 }}>{currentUser.email}</span>\n          </div>\n          <button\n            style={{ padding: '0.5rem 1.2rem', background: '#4f46e5', color: '#fff', border: 'none', borderRadius: 6, fontWeight: 500, cursor: 'pointer' }}\n            onClick={() => router.push('/')}\n          >\n            Home\n          </button>\n          <button\n            style={{ padding: '0.5rem 1.2rem', background: '#dc2626', color: '#fff', border: 'none', borderRadius: 6, fontWeight: 500, cursor: 'pointer' }}\n            onClick={handleLogout}\n          >\n            Logout\n          </button>\n        </div>\n      )}\n    </nav>\n  );\n}\n\nexport default function App({ Component, pageProps }) {\n  return (\n    <AuthProvider>\n      <Navbar />\n      <Component {...pageProps} />\n    </AuthProvider>\n  );\n}\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;;;;;;;;;;;AAGA,SAAS;IACP,MAAM,EAAE,WAAW,EAAE,MAAM,EAAE,GAAG,CAAA,GAAA,+GAAA,CAAA,UAAO,AAAD;IACtC,MAAM,SAAS,CAAA,GAAA,uHAAA,CAAA,YAAS,AAAD;IACvB,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,mGAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,CAAA,GAAA,mGAAA,CAAA,YAAS,AAAD,EAAE;QAAQ,WAAW;IAAO,GAAG,EAAE;IACzC,QAAQ,GAAG,CAAC,yBAAyB;IACrC,MAAM,aAAa;QAAC;QAAU;KAAU,CAAC,QAAQ,CAAC,OAAO,QAAQ;IACjE,IAAI,CAAC,WAAW,YAAY,OAAO;IACnC,MAAM,eAAe;QACnB,MAAM;QACN,OAAO,IAAI,CAAC;IACd;IACA,qBACE,qKAAC;QAAI,OAAO;YACV,OAAO;YACP,YAAY;YACZ,cAAc;YACd,SAAS;YACT,SAAS;YACT,YAAY;YACZ,gBAAgB;YAChB,UAAU;YACV,KAAK;YACL,QAAQ;QACV;;0BACE,qKAAC;gBAAI,OAAO;oBAAE,YAAY;oBAAK,OAAO;oBAAW,UAAU;oBAAI,QAAQ;gBAAU;gBAAG,SAAS,IAAM,OAAO,IAAI,CAAC;0BAAM;;;;;;YACpH,6BACC,qKAAC;gBAAI,OAAO;oBAAE,SAAS;oBAAQ,YAAY;oBAAU,KAAK;gBAAO;;kCAC/D,qKAAC;wBAAI,OAAO;4BAAE,OAAO;4BAAQ,YAAY;4BAAK,UAAU;4BAAI,YAAY;4BAAW,cAAc;4BAAG,SAAS;4BAAiB,QAAQ;wBAAoB;;4BACvJ,YAAY,WAAW,IAAI;0CAAU,qKAAC;;;;;0CACvC,qKAAC;gCAAK,OAAO;oCAAE,OAAO;oCAAW,YAAY;oCAAK,UAAU;gCAAG;0CAAI,YAAY,KAAK;;;;;;;;;;;;kCAEtF,qKAAC;wBACC,OAAO;4BAAE,SAAS;4BAAiB,YAAY;4BAAW,OAAO;4BAAQ,QAAQ;4BAAQ,cAAc;4BAAG,YAAY;4BAAK,QAAQ;wBAAU;wBAC7I,SAAS,IAAM,OAAO,IAAI,CAAC;kCAC5B;;;;;;kCAGD,qKAAC;wBACC,OAAO;4BAAE,SAAS;4BAAiB,YAAY;4BAAW,OAAO;4BAAQ,QAAQ;4BAAQ,cAAc;4BAAG,YAAY;4BAAK,QAAQ;wBAAU;wBAC7I,SAAS;kCACV;;;;;;;;;;;;;;;;;;AAOX;AAEe,SAAS,IAAI,EAAE,SAAS,EAAE,SAAS,EAAE;IAClD,qBACE,qKAAC,+GAAA,CAAA,eAAY;;0BACX,qKAAC;;;;;0BACD,qKAAC;gBAAW,GAAG,SAAS;;;;;;;;;;;;AAG9B","debugId":null}}]
}