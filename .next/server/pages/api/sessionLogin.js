"use strict";(()=>{var e={};e.id=444,e.ids=[444],e.modules={922:e=>{e.exports=require("firebase-admin/auth")},3480:(e,n,r)=>{e.exports=r(5600)},4715:e=>{e.exports=require("firebase-admin/app")},5600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6435:(e,n)=>{Object.defineProperty(n,"M",{enumerable:!0,get:function(){return function e(n,r){return r in n?n[r]:"then"in n&&"function"==typeof n.then?n.then(n=>e(n,r)):"function"==typeof n&&"default"===r?n:void 0}}})},6673:(e,n,r)=>{r.r(n),r.d(n,{config:()=>d,default:()=>u,routeModule:()=>E});var t={};r.r(t),r.d(t,{default:()=>a});var i=r(3480),o=r(8667),s=r(6435);async function a(e,n){let{getAuth:t}=r(922),{initializeApp:i,getApps:o,cert:s}=r(4715);if(!process.env.FIREBASE_PRIVATE_KEY)return console.error("Missing FIREBASE_PRIVATE_KEY env variable"),n.status(500).send("Server misconfiguration");if(o().length||i({credential:s({projectId:process.env.FIREBASE_PROJECT_ID,clientEmail:process.env.FIREBASE_CLIENT_EMAIL,privateKey:process.env.FIREBASE_PRIVATE_KEY.replace(/\\n/g,"\n")})}),"POST"!==e.method)return n.status(405).end();let{idToken:a}=e.body;try{if(!a)return console.error("[sessionLogin] No idToken provided"),n.status(400).send("No idToken provided");let e=await t().createSessionCookie(a,{expiresIn:432e6}),r=[`session=${e}`,"Path=/","HttpOnly","SameSite=Strict","Max-Age=432000","Secure"].filter(Boolean).join("; ");n.setHeader("Set-Cookie",r),n.status(200).end()}catch(e){console.error("[sessionLogin] Error:",e),n.status(500).send("INTERNAL SERVER ERROR")}}let u=(0,s.M)(t,"default"),d=(0,s.M)(t,"config"),E=new i.PagesAPIRouteModule({definition:{kind:o.A.PAGES_API,page:"/api/sessionLogin",pathname:"/api/sessionLogin",bundlePath:"",filename:""},userland:t})},8667:(e,n)=>{Object.defineProperty(n,"A",{enumerable:!0,get:function(){return r}});var r=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})}};var n=require("../../webpack-api-runtime.js");n.C(e);var r=n(n.s=6673);module.exports=r})();